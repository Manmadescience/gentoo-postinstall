#!/bin/bash

# Save the current directory into a variable.
# Source: http://stackoverflow.com/a/26384751/2650249
function mark {
    export $1="$(pwd)"
}

function git-alias {
	git config --global alias.lg '!git lg1'
	git config --global alias.lg1 '!git lg1-specific --all'
	git config --global alias.lg2 '!git lg2-specific --all'
	git config --global alias.lg3 '!git lg3-specific --all'
	git config --global alias.lg1-specific "log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)'"
	git config --global alias.lg2-specific "log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset)%C(bold yellow)%d%C(reset)%n''          %C(white)%s%C(reset) %C(dim white)- %an%C(reset)'"
	git config --global alias.lg3-specific "log --graph --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold green)(%ar)%C(reset) %C(bold cyan)(committed: %cD)%C(reset) %C(bold yellow)%d%C(reset)%n''          %C(white)%s%C(reset)%n''          %C(dim white)- %an <%ae> %C(reset) %C(dim white)(committer: %cn <%ce>)%C(reset)'"
}

# set PATH so it includes user's private bin if it exists
if [ -d "$HOME/bin" ] ; then
    PATH="$HOME/bin:$PATH"
fi
# android sdk tools necessary to build cyanogenmod
if [ -d "$HOME/bin" ] ; then
        PATH=$PATH:$HOME/programming/misc/depot_tools
fi

# bind history search to arrow keys
bind '"\e[A":history-search-backward'
bind '"\e[B":history-search-forward'

# enable bash completion
source /etc/bash/bashrc.d/bash_completion.sh
# also for sudo'ed commands
complete -cf sudo

# show git branch in prompt:
# include git script
GIT_PROMPT="/usr/share/git/git-prompt.sh"
if [ -f "$GIT_PROMPT" ]; then
	source "$GIT_PROMPT"
	# modify PS1
	#PS1='[\u@\h \W$(__git_ps1 " (%s)")]\$ '
	PS1='\[\033[01;32m\]\u@\h\[\033[01;34m\] \w$(__git_ps1) \$\[\033[00m\] '
fi

# prevent wine from adding menu entries and desktop links
export WINEDLLOVERRIDES='winemenubuilder.exe=d'
# switch to 32bit prefix
export WINEPREFIX="$HOME/.local/share/wineprefixes/win32"
export WINEARCH="win32"

git-alias
