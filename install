#!/bin/bash
GIT_DIR=$(git rev-parse --show-toplevel)
SOURCE_LINE="source \"$GIT_DIR/env-init\""
grep -q -F "$SOURCE_LINE" $HOME/.bashrc || printf "\n# execute custom init script\n$SOURCE_LINE" >> $HOME/.bashrc

# source aliases
for f in "$GIT_DIR"/aliases/*; do
	SOURCE_LINE="source \"$f\""
	grep -q -F "$SOURCE_LINE" $HOME/.bashrc || printf "\n$SOURCE_LINE" >> $HOME/.bashrc
done

# copy custom executables
if [ -d "$HOME/bin" ] ; then
    cp -ax $GIT_DIR/bin/* $HOME/bin
    cp -ax $GIT_DIR/qemu/* $HOME/bin
fi
